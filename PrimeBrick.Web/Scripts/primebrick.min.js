"use strict";var App=function(){};App.Controller={currentInstance:null,Load:function(n,t){require(["app/"+n],function(i){if(App.Log.Info("The controller ['app/"+n+"'] has been loaded!"),i.routes==null||i.routes.length<=0){App.Log.Error("The controller doesn't have a routes array defined!",!0);return}$.each(i.routes,function(n,t){Router.add(t)});var r=Router.matchRoute(window.location.hash);r&&Router.run(r);App.Controller.currentInstance=i;t&&t()},function(n){App.Log.Error(n)})}};App.View={Load:function(n,t,i,r,u){var f=App.View.GetViewParameters(t),e;f&&f.viewPath||App.Log.Error("Cannot find parameters for the path "+t.url+"!");e=null;require(["text!"+f.viewPath],function(o){try{if(App.Controller.currentInstance.view&&(App.Controller.currentInstance.view.teardown(),App.Controller.currentInstance.view=null),e=new Ractive({el:"#"+n,template:o,data:i}),r)e.on(r);e.context=t;App.Controller.currentInstance.view=e;App.Controller.currentInstance.view.name=f.namespace+"."+f.viewName;App.View.LoadLabels(e,function(){var n,t,i;window.system.view.set("pageSubTitle","");window.system.view.set("pageTitle","???");window.system.view.set("pageIcon","glyphicon glyphicon-new-window");window.system.view.set("pageRootTitle","???");window.system.view.set("pageRootPath","#/"+f.namespace.replace("app.",""));n=e.get("view.labels.pageTitle");n!=null&&window.system.view.set("pageTitle",n);t=e.get("view.labels.pageSubTitle");t!=null&&window.system.view.set("pageSubTitle",t);i=e.get("view.labels.pageIcon");i!=null&&window.system.view.set("pageIcon",i);App.Log.Info("The view ["+f.viewName+"] in ["+f.namespace+"] is ready!");u&&u(e)});App.Log.Info("The view ["+f.viewName+"] in ["+f.namespace+"] has been loaded!")}catch(s){App.Log.Error("Error: Impossible to load the view. "+s.message,!0)}},function(n){App.Log.Error(n,!0)})},GetViewParameters:function(n){var t={namespace:"",viewName:"",viewPath:""};if(!n.config){App.Log.Error("Cannot find configuration for the path "+n.url+"!");return}if(t.namespace=n.config.namespace,n.config.view)t.viewName=n.config.view;else if(n.params.viewName)t.viewName=n.params.viewName;else return App.Log.Error("Cannot find the view name for the path "+n.url+"!"),t;return t.viewPath=t.namespace.replace(/\./g,"/")+"/"+t.viewName+".html",t},LoadLabels:function(n,t){if(!n.name){App.Log.Error("Cannot find view name!",!0);return}$.ajax({url:"/api/dictionary/viewlabels/"+encodeURI(n.name)+"/",type:"GET",async:!0,dataType:"json",success:function(i){n.set("view.labels",i);t&&t(i)},error:function(n,t,i){n.responseText!=null&&n.responseText.length<=100?App.Log.Error("Impossible to get the view labels.\r\nError: "+n.responseText,!0):(App.Log.Error("Impossible to get the view labels.\r\nError: "+n.responseText,!1),App.Log.Error("Impossible to get the view labels.\r\nError: "+i,!0))}})}};App.Log={Info:function(n,t){console.info(n);t===!0&&alert(n)},Warning:function(n,t){console.warn(n);t===!0&&alert(n)},Error:function(n,t){console.error(n);t===!0&&alert(n)}};App.UI={RenderWrapper:function(){var n=$("#application-menu").height(),t,i;$("body").css("padding-top",n+"px");t=$(window).height();i=$("#wrapper");i.height(t-n)}};
//# sourceMappingURL=primebrick.min.js.map